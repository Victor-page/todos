(this["webpackJsonpredux-fundamentals-example"]=this["webpackJsonpredux-fundamentals-example"]||[]).push([[0],{1108:function(e,t){},1111:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(16),c=n.n(o),l=(n(50),n(5)),u=n.n(l),s=n(10),i=n(30),d=n(2),m=n(6),f=n(17),p=n(8),v=n(44),b=["body"];function h(e){return g.apply(this,arguments)}function g(){return(g=Object(s.a)(u.a.mark((function e(t){var n,a,r,o,c,l,s,i=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},a=n.body,r=Object(v.a)(n,b),o={"Content-Type":"application/json"},c=Object(p.a)(Object(p.a)({method:a?"POST":"GET"},r),{},{headers:Object(p.a)(Object(p.a)({},o),r.headers)}),a&&(c.body=JSON.stringify(a)),e.prev=4,e.next=7,window.fetch(t,c);case 7:return s=e.sent,e.next=10,s.json();case 10:if(l=e.sent,!s.ok){e.next=13;break}return e.abrupt("return",l);case 13:throw new Error(s.statusText);case 16:return e.prev=16,e.t0=e.catch(4),e.abrupt("return",Promise.reject(e.t0.message?e.t0.message:l));case 19:case"end":return e.stop()}}),e,null,[[4,16]])})))).apply(this,arguments)}h.get=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return h(e,Object(p.a)(Object(p.a)({},t),{},{method:"GET"}))},h.post=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return h(e,Object(p.a)(Object(p.a)({},n),{},{body:t}))};var E,y={All:"all",Active:"active",Completed:"completed"},O={status:y.All,colors:[]},j=Object(m.d)({name:"filters",initialState:O,reducers:{statusFilterChanged:function(e,t){var n=t.payload;e.status=n},colorFilterChanged:{reducer:function(e,t){var n=t.payload,a=n.color,r=n.changeType,o=e.colors;switch(r){case"added":!o.includes(a)&&o.push(a);break;case"removed":e.colors=o.filter((function(e){return e!==a}))}},prepare:function(e,t){return{payload:{color:e,changeType:t}}}}}}),C=j.actions,k=(C.statusFilterChanged,C.colorFilterChanged),x=j.reducer,N=y.All,w=y.Completed,A=Object(m.c)(),T=A.getInitialState({status:"idle"}),S=Object(m.d)({name:"todos",initialState:T,reducers:{todoToggled:function(e,t){var n=e.entities[t.payload];n.completed=!n.completed},todoDeleted:A.removeOne,markAllCompleted:function(e){var t=e.entities;Object.values(t).forEach((function(e){return e.completed=!0}))},clearAllCompleted:function(e,t){var n=Object.values(e.entities).filter((function(e){return e.completed})).map((function(e){return e.id}));A.removeMany(e,n)},todoColorSelected:{reducer:function(e,t){var n=e.entities,a=t.payload,r=a.color;n[a.todoId].color=r},prepare:function(e,t){return{payload:{todoId:e,color:t}}}}},extraReducers:function(e){return e.addCase(R.pending,(function(e,t){e.status="loading"})).addCase(R.fulfilled,(function(e,t){A.setAll(e,t.payload),e.status="idle"})).addCase(F.fulfilled,A.addOne)}}),I=S.actions,F=(I.todoColorSelected,I.clearAllCompleted,I.markAllCompleted,I.todoDeleted,I.todoToggled,Object(m.b)("todo/saveNewTodo",function(){var e=Object(s.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={text:t},e.next=3,h.post("/fakeApi/todos",{todo:n});case 3:return a=e.sent,e.abrupt("return",a.todo);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),R=Object(m.b)("todos/fetchTodos",Object(s.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.get("/fakeApi/todos");case 2:return t=e.sent,e.abrupt("return",t.todos);case 4:case"end":return e.stop()}}),e)})))),M=A.getSelectors((function(e){return e.todos})),z=M.selectAll,G=M.selectById,L=(Object(f.a)(z,(function(e){return e.map((function(e){return e.id}))})),Object(f.a)(z,(function(e){return e.filters}),(function(e,t){var n=t.status,a=t.colors,r=n===N;if(r&&0===a.length)return e;var o=n===w;return e.filter((function(e){var t=r||e.completed===o,n=0===a.length||a.includes(e.color);return t&&n}))}))),P=Object(f.a)(L,(function(e){return e.map((function(e){return e.id}))})),B=Object(f.a)(z,(function(e){return e.filter((function(e){return!e.completed})).length})),D=S.reducer,H=function(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)("idle"),l=Object(i.a)(c,2),m=l[0],f=l[1],p=Object(d.b)(),v=function(){var e=Object(s.a)(u.a.mark((function e(t){var a,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.key,r=n.trim(),"Enter"===a&&r){e.next=4;break}return e.abrupt("return");case 4:return f("loading"),c=F(r),e.next=8,p(c);case 8:o(""),f("idle");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b="loading"===m,h=b?"":"What needs to be done?",g=b&&r.a.createElement("div",{className:"loader"});return r.a.createElement("header",{className:"header"},r.a.createElement("input",{autoFocus:!0,type:"text",className:"new-todo",placeholder:h,value:n,onChange:function(e){var t=e.target;return o(t.value)},onKeyDown:v,disabled:b}),g)},$=["svgRef","title"];function J(){return(J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function q(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var K=function(e){var t=e.svgRef,n=e.title,a=q(e,$);return r.a.createElement("svg",J({"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"times",className:"svg-inline--fa fa-times fa-w-11",role:"img",viewBox:"0 0 352 512",ref:t},a),n?r.a.createElement("title",null,n):null,E||(E=r.a.createElement("path",{fill:"currentColor",d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"})))},U=r.a.forwardRef((function(e,t){return r.a.createElement(K,J({svgRef:t},e))})),W=(n.p,["green","blue","orange","purple","red"]),Q=function(e){return e[0].toUpperCase()+e.slice(1)},V=function(e){var t=e.id,n=Object(d.c)((function(e){return G(e,t)})),a=n.text,o=n.completed,c=n.color,l=Object(d.b)(),u=W.map((function(e){return r.a.createElement("option",{key:e,value:e},Q(e))}));return r.a.createElement("li",null,r.a.createElement("div",{className:"view"},r.a.createElement("div",{className:"segment label"},r.a.createElement("input",{className:"toggle",type:"checkbox",checked:o,onChange:function(){return l({type:"todos/todoToggled",payload:t})}}),r.a.createElement("div",{className:"todo-text"},a)),r.a.createElement("div",{className:"segment buttons"},r.a.createElement("select",{className:"colorPicker",value:c,style:{color:c},onChange:function(e){var n=e.target.value;return l({type:"todos/todoColorSelected",payload:{color:n,todoId:t}})}},r.a.createElement("option",{value:""}),u),r.a.createElement("button",{className:"destroy",onClick:function(){return l({type:"todos/todoDeleted",payload:t})}},r.a.createElement(U,null)))))},X=function(){var e=Object(d.c)(P);if("loading"===Object(d.c)((function(e){return e.todos.status})))return r.a.createElement("div",{className:"todo-list"},r.a.createElement("div",{className:"loader"}));var t=e.map((function(e){return r.a.createElement(V,{key:e,id:e})}));return r.a.createElement("ul",{className:"todo-list"},t)},Y=function(e){var t=e.value,n=e.onChange,a=Object.keys(y).map((function(e){var a=y[e],o=a===t?"selected":"";return r.a.createElement("li",{key:a},r.a.createElement("button",{className:o,onClick:function(){return n(a)}},e))}));return r.a.createElement("div",{className:"filters statusFilters"},r.a.createElement("h5",null,"Filter by Status"),r.a.createElement("ul",null,a))},Z=function(e){var t=e.value,n=e.onChange,a=W.map((function(e){var a=t.includes(e);return r.a.createElement("label",{key:e},r.a.createElement("input",{type:"checkbox",name:e,checked:a,onChange:function(){n(e,a?"removed":"added")}}),r.a.createElement("span",{className:"color-block",style:{backgroundColor:e}}),Q(e))}));return r.a.createElement("div",{className:"filters colorFilters"},r.a.createElement("h5",null,"Filter by Color"),r.a.createElement("form",{className:"colorSelection"},a))},_=function(e){var t=e.count,n=1===t?"":"s";return r.a.createElement("div",{className:"todo-count"},r.a.createElement("h5",null,"Remaining Todos"),r.a.createElement("strong",null,t)," item",n," left")},ee=function(e){return e.filters},te=function(){var e=Object(d.b)(),t=Object(d.c)(B),n=Object(d.c)(ee),a=n.status,o=n.colors;return r.a.createElement("footer",{className:"footer"},r.a.createElement("div",{className:"actions"},r.a.createElement("h5",null,"Actions"),r.a.createElement("button",{className:"button",onClick:function(){return e({type:"todos/markAllCompleted"})}},"Mark All Completed"),r.a.createElement("button",{className:"button",onClick:function(){return e({type:"todos/clearAllCompleted"})}},"Clear Completed")),r.a.createElement(_,{count:t}),r.a.createElement(Y,{value:a,onChange:function(t){return e({type:"filters/statusFilterChanged",payload:t})}}),r.a.createElement(Z,{value:o,onChange:function(t,n){return e(k(t,n))}}))};var ne=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("main",null,r.a.createElement("section",{className:"medium-container"},r.a.createElement("h2",null,"Todos"),r.a.createElement("div",{className:"todoapp"},r.a.createElement(H,null),r.a.createElement(X,null),r.a.createElement(te,null)))))},ae=Object(m.a)({reducer:{todos:D,filters:x}}),re=n(11),oe=(n(34),n(26)),ce=n.n(oe),le=re.c.extend({serializeIds:"always"}),ue=ce()();var se=function(e){var t,n;return e[(t=0,n=e.length-1,t=Math.ceil(t),n=Math.floor(n),Math.floor(ue()*(n-t+1))+t)]},ie=[{base:"Buy $THING",values:["milk","bread","cheese","toys"]},{base:"Clean $THING",values:["house","yard","bedroom","car"]},{base:"Read $THING",values:["newspaper","book","email"]}];new re.d({routes:function(){this.namespace="fakeApi",this.timing=2e3,this.resource("todos"),this.resource("lists");var e=this;this.post("/todos",(function(t,n){var a=this.normalizedRequestAttrs();if("error"===a.text)throw new Error("Could not save the todo!");return e.create("todo",a)}))},models:{todo:re.b.extend({}),list:re.b.extend({todos:Object(re.e)()})},factories:{todo:re.a.extend({id:function(e){return Number(e)},text:function(){return function(){var e=se(ie),t=se(e.values);return e.base.replace("$THING",t)}()},completed:function(){return!1},color:function(){return""}})},serializers:{todo:le.extend({serialize:function(e,t){var n=function(e){e.id=Number(e.id)},a=le.prototype.serialize.apply(this,arguments);return a.todo?n(a.todo):a.todos&&a.todos.forEach(n),a}}),list:le},seeds:function(e){e.createList("todo",5)}}),ae.dispatch(R()),c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(d.a,{store:ae},r.a.createElement(ne,null))),document.getElementById("root"))},45:function(e,t,n){e.exports=n(1111)},50:function(e,t,n){}},[[45,1,2]]]);
//# sourceMappingURL=main.be3b1225.chunk.js.map